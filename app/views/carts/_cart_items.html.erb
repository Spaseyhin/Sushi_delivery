<turbo-frame id="cart-frame">
  <div id="cart-items" class="container">
    <% cart_items.each do |item| %>
      <div class="row align-items-center border-bottom py-3">
        <!-- Левая часть -->
        <div class="col-4 d-flex align-items-center">

          <% if item.product.image.attached? %>
            <%= image_tag url_for(item.product.image.variant(resize_to_limit: [80, 80])), class: "img-fluid rounded" if item.product.image.attached? %>
          <% else %>
            <%= image_tag "2.png", width: 150, class: "mb-3 rounded", loading: "lazy" %>
          <% end %>
      
          <div>
            <h5 class="mb-1"><%= item.product.name %></h5>
            <p class="mb-0 text-muted">Цена: <%= item.product.price %> ₽</p>
          </div>
        </div>

        <!-- Центральная часть -->
        <div class="col-4 d-flex justify-content-center align-items-center">
          <div class="d-flex align-items-center" style="gap: 10px;">
            <%= button_to '-', cart_item_path(item, change: -1), method: :patch, form: { data: { turbo_stream: true } }, class: "btn btn-outline-secondary btn-sm" %>
            <span style="min-width: 32px; text-align: center;"><%= item.quantity %></span>
            <%= button_to '+', cart_item_path(item, change: 1), method: :patch, form: { data: { turbo_stream: true } }, class: "btn btn-outline-secondary btn-sm" %>
          </div>
        </div>

        <!-- Правая часть -->
        <div class="col-4 text-end">
          <p class="fw-bold mb-0">= <%= item.product.price * item.quantity %> ₽</p>
        </div>
      </div>
    <% end %>
    <!-- ✅ Итоговая сумма -->
    <h4 id="cart-total-price" class="text-end mt-3 text-success">Итого <%= @cart_total_price %> ₽
    </h4>
  </div>
</turbo-frame>

